{"openapi":"3.0.1","info":{"title":"Backend Bán Khóa Học API","description":"API Documentation cho hệ thống bán khóa học","contact":{"name":"Support Team","email":"support@bankhoahoc.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080/api","description":"Local Development Server"},{"url":"https://api.bankhoahoc.com","description":"Production Server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Orders","description":"API quản lý đơn hàng"},{"name":"Authentication","description":"API quản lý xác thực và đăng ký người dùng"},{"name":"Chapters","description":"API quản lý chương trong khóa học"},{"name":"Categories","description":"API quản lý danh mục khóa học"},{"name":"Courses","description":"API quản lý khóa học"},{"name":"Enrollments","description":"API quản lý ghi danh khóa học"}],"paths":{"/orders/{id}/status":{"put":{"tags":["Orders"],"operationId":"updateOrderStatus","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"status","in":"query","required":true,"schema":{"type":"string","enum":["PENDING","PAID","CANCELLED","REFUNDED"]}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/enrollments/{id}/progress":{"put":{"tags":["Enrollments"],"operationId":"updateProgress","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"progress","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/courses/{id}":{"get":{"tags":["Courses"],"summary":"Lấy chi tiết khóa học","description":"Trả về thông tin chi tiết của một khóa học, không cần đăng nhập","operationId":"getCourseById","parameters":[{"name":"id","in":"path","description":"ID của khóa học","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Khóa học không tồn tại","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Tìm thấy khóa học","content":{"*/*":{"schema":{"type":"object"}}}}}},"put":{"tags":["Courses"],"summary":"Cập nhật khóa học","description":"Cập nhật thông tin khóa học. Chỉ instructor sở hữu khóa học hoặc ADMIN mới có quyền","operationId":"updateCourse","parameters":[{"name":"id","in":"path","description":"ID của khóa học","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourseCreateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Courses"],"operationId":"deleteCourse","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/chapters/{id}":{"get":{"tags":["Chapters"],"summary":"Lấy chi tiết chương","description":"Trả về thông tin chi tiết của một chương. Nếu đã mua khóa học sẽ thấy đầy đủ nội dung, nếu chưa chỉ thấy thông tin cơ bản.","operationId":"getChapterById","parameters":[{"name":"id","in":"path","description":"ID của chương","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Tìm thấy chương","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Chương không tồn tại","content":{"*/*":{"schema":{"type":"object"}}}}}},"put":{"tags":["Chapters"],"summary":"Cập nhật chương","description":"Cập nhật thông tin chương. Chỉ INSTRUCTOR sở hữu khóa học mới có quyền","operationId":"updateChapter","parameters":[{"name":"id","in":"path","description":"ID của chương","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChapterCreateDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"tags":["Chapters"],"summary":"Xóa chương","description":"Xóa một chương. Chỉ INSTRUCTOR sở hữu khóa học mới có quyền","operationId":"deleteChapter","parameters":[{"name":"id","in":"path","description":"ID của chương","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/categories/{id}":{"get":{"tags":["Categories"],"operationId":"getCategoryById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}},"put":{"tags":["Categories"],"operationId":"updateCategory","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["Categories"],"operationId":"deleteCategory","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/orders":{"post":{"tags":["Orders"],"summary":"Tạo đơn hàng mới với QR code thanh toán","description":"Tạo đơn hàng với danh sách các khóa học. Hệ thống sẽ tự động tạo QR code thanh toán với số tiền tương ứng","operationId":"createOrder","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCreateDTO"}}},"required":true},"responses":{"200":{"description":"Tạo đơn hàng thành công. Response sẽ chứa QR code để thanh toán","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Dữ liệu không hợp lệ hoặc khóa học không tồn tại","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/enrollments/enroll/{courseId}":{"post":{"tags":["Enrollments"],"summary":"Ghi danh vào khóa học","description":"Ghi danh người dùng hiện tại vào một khóa học","operationId":"enrollInCourse","parameters":[{"name":"courseId","in":"path","description":"ID của khóa học","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Ghi danh thành công","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Đã ghi danh hoặc khóa học không tồn tại","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/courses":{"get":{"tags":["Courses"],"summary":"Lấy danh sách tất cả khóa học","description":"Trả về tất cả khóa học, không cần đăng nhập","operationId":"getAllCourses","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CourseDTO"}}}}}}},"post":{"tags":["Courses"],"summary":"Tạo khóa học mới","description":"Tạo một khóa học mới. Chỉ INSTRUCTOR và ADMIN mới có quyền","operationId":"createCourse","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourseCreateDTO"}}},"required":true},"responses":{"400":{"description":"Dữ liệu không hợp lệ","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Tạo khóa học thành công","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/courses/{courseId}/chapters":{"get":{"tags":["Courses"],"summary":"Lấy danh sách chương của khóa học","description":"Lấy tất cả chương của một khóa học","operationId":"getChaptersOfCourse","parameters":[{"name":"courseId","in":"path","description":"ID của khóa học","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChapterDTO"}}}}}}},"post":{"tags":["Courses"],"summary":"Thêm chương mới cho khóa học","description":"Thêm một chương mới vào khóa học đã tạo. Chỉ INSTRUCTOR sở hữu khóa học mới có quyền","operationId":"addChapterToCourse","parameters":[{"name":"courseId","in":"path","description":"ID của khóa học","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChapterCreateDTO"}}},"required":true},"responses":{"200":{"description":"Tạo chương thành công","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Dữ liệu không hợp lệ hoặc không có quyền","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/chapters":{"post":{"tags":["Chapters"],"summary":"Tạo chương mới","description":"Tạo một chương mới trong khóa học. Chỉ INSTRUCTOR sở hữu khóa học mới có quyền","operationId":"createChapter","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChapterCreateDTO"}}},"required":true},"responses":{"200":{"description":"Tạo chương thành công","content":{"*/*":{"schema":{"type":"object"}}}},"400":{"description":"Dữ liệu không hợp lệ hoặc không có quyền","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/categories":{"get":{"tags":["Categories"],"summary":"Lấy danh sách tất cả danh mục","description":"Trả về tất cả danh mục khóa học, không cần đăng nhập","operationId":"getAllCategories","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategoryDTO"}}}}}}},"post":{"tags":["Categories"],"summary":"Tạo danh mục mới","description":"Tạo danh mục mới. Chỉ ADMIN mới có quyền","operationId":"createCategory","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryDTO"}}},"required":true},"responses":{"400":{"description":"Dữ liệu không hợp lệ","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Tạo danh mục thành công","content":{"*/*":{"schema":{"type":"object"}}}}},"security":[{"bearerAuth":[]}]}},"/auth/register":{"post":{"tags":["Authentication"],"summary":"Đăng ký tài khoản mới","description":"Tạo tài khoản người dùng mới với role STUDENT","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Đăng ký thành công","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"400":{"description":"Dữ liệu không hợp lệ hoặc username/email đã tồn tại","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/auth/login":{"post":{"tags":["Authentication"],"summary":"Đăng nhập","description":"Đăng nhập bằng username/email và password, trả về JWT token","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"400":{"description":"Thông tin đăng nhập không đúng","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Đăng nhập thành công","content":{"*/*":{"schema":{"$ref":"#/components/schemas/JwtResponse"}}}}}}},"/orders/{id}":{"get":{"tags":["Orders"],"operationId":"getOrderById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/orders/my-orders":{"get":{"tags":["Orders"],"summary":"Lấy danh sách đơn hàng của tôi","description":"Trả về tất cả đơn hàng của người dùng hiện tại","operationId":"getMyOrders","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/enrollments/my-enrollments":{"get":{"tags":["Enrollments"],"summary":"Lấy danh sách khóa học đã ghi danh","description":"Trả về tất cả khóa học mà người dùng hiện tại đã ghi danh","operationId":"getMyEnrollments","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EnrollmentDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/enrollments/course/{courseId}":{"get":{"tags":["Enrollments"],"operationId":"getEnrollmentsByCourse","parameters":[{"name":"courseId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EnrollmentDTO"}}}}}}}},"/enrollments/check":{"get":{"tags":["Enrollments"],"operationId":"checkEnrollment","parameters":[{"name":"courseId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}},"/courses/search":{"get":{"tags":["Courses"],"summary":"Tìm kiếm khóa học","description":"Tìm kiếm khóa học theo từ khóa trong title hoặc description","operationId":"searchCourses","parameters":[{"name":"keyword","in":"query","description":"Từ khóa tìm kiếm","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CourseDTO"}}}}}}}},"/courses/my-courses":{"get":{"tags":["Courses"],"summary":"Lấy danh sách khóa học của instructor","description":"Trả về tất cả khóa học do instructor hiện tại tạo","operationId":"getMyCourses","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CourseDTO"}}}}}},"security":[{"bearerAuth":[]}]}},"/courses/category/{categoryId}":{"get":{"tags":["Courses"],"operationId":"getCoursesByCategory","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CourseDTO"}}}}}}}},"/chapters/course/{courseId}":{"get":{"tags":["Chapters"],"summary":"Lấy danh sách chương của khóa học","description":"Trả về tất cả chương của một khóa học, sắp xếp theo thứ tự. Ai cũng có thể xem, nhưng chỉ học viên đã mua mới thấy nội dung chi tiết.","operationId":"getChaptersByCourse","parameters":[{"name":"courseId","in":"path","description":"ID của khóa học","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChapterDTO"}}}}}}}}},"components":{"schemas":{"CourseCreateDTO":{"required":["categoryId","price","title"],"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"thumbnail":{"type":"string"},"price":{"type":"number"},"originalPrice":{"type":"number"},"level":{"type":"string","enum":["BEGINNER","INTERMEDIATE","ADVANCED"]},"language":{"type":"string"},"estimatedDuration":{"type":"integer","format":"int32"},"categoryId":{"type":"integer","format":"int64"}}},"ChapterCreateDTO":{"required":["title"],"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"orderIndex":{"type":"integer","format":"int32"},"isPublished":{"type":"boolean"},"courseId":{"type":"integer","format":"int64"}}},"CategoryDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"image":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"OrderCreateDTO":{"required":["courseIds"],"type":"object","properties":{"courseIds":{"type":"array","items":{"type":"integer","format":"int64"}}}},"RegisterRequest":{"required":["email","password","username"],"type":"object","properties":{"username":{"maxLength":50,"minLength":3,"type":"string"},"email":{"type":"string"},"password":{"maxLength":2147483647,"minLength":6,"type":"string"},"fullName":{"type":"string"},"phoneNumber":{"type":"string"}}},"UserDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"fullName":{"type":"string"},"phoneNumber":{"type":"string"},"avatar":{"type":"string"},"role":{"type":"string","enum":["ADMIN","INSTRUCTOR","STUDENT"]},"isActive":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"}}},"LoginRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"JwtResponse":{"type":"object","properties":{"token":{"type":"string"},"type":{"type":"string"},"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}},"OrderDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"orderNumber":{"type":"string"},"totalAmount":{"type":"number"},"paymentMethod":{"type":"string"},"qrCodeUrl":{"type":"string"},"qrCodeContent":{"type":"string"},"bankName":{"type":"string"},"accountNumber":{"type":"string"},"accountName":{"type":"string"},"status":{"type":"string","enum":["PENDING","PAID","CANCELLED","REFUNDED"]},"createdAt":{"type":"string","format":"date-time"},"userId":{"type":"integer","format":"int64"},"userName":{"type":"string"},"items":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemDTO"}}}},"OrderItemDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"price":{"type":"number"},"courseId":{"type":"integer","format":"int64"},"courseTitle":{"type":"string"},"courseThumbnail":{"type":"string"}}},"EnrollmentDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"progress":{"type":"integer","format":"int32"},"completedAt":{"type":"string","format":"date-time"},"enrolledAt":{"type":"string","format":"date-time"},"studentId":{"type":"integer","format":"int64"},"studentName":{"type":"string"},"courseId":{"type":"integer","format":"int64"},"courseTitle":{"type":"string"}}},"CourseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"description":{"type":"string"},"thumbnail":{"type":"string"},"price":{"type":"number"},"originalPrice":{"type":"number"},"studentCount":{"type":"integer","format":"int32"},"rating":{"type":"number","format":"double"},"reviewCount":{"type":"integer","format":"int32"},"isPublished":{"type":"boolean"},"level":{"type":"string","enum":["BEGINNER","INTERMEDIATE","ADVANCED"]},"language":{"type":"string"},"estimatedDuration":{"type":"integer","format":"int32"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"categoryId":{"type":"integer","format":"int64"},"categoryName":{"type":"string"},"instructorId":{"type":"integer","format":"int64"},"instructorName":{"type":"string"}}},"ChapterDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"description":{"type":"string"},"orderIndex":{"type":"integer","format":"int32"},"isPublished":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"courseId":{"type":"integer","format":"int64"},"courseTitle":{"type":"string"},"contents":{"type":"array","items":{"$ref":"#/components/schemas/CourseContentDTO"}},"contentCount":{"type":"integer","format":"int32"},"totalDuration":{"type":"integer","format":"int32"}}},"CourseContentDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"description":{"type":"string"},"videoUrl":{"type":"string"},"duration":{"type":"integer","format":"int32"},"orderIndex":{"type":"integer","format":"int32"},"isPreview":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"chapterId":{"type":"integer","format":"int64"},"chapterTitle":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT token được lấy từ endpoint /auth/login","scheme":"bearer","bearerFormat":"JWT"}}}}